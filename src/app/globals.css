@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* FORCE DARK THEME - Always dark, no light mode */
  :root,
  html {
    color-scheme: dark;
    --bg: #000000;
    --fg: #e5e5e5;
    --accent: rgba(255,255,255,0.1);
    --card: rgba(255,255,255,0.04);
    --border: rgba(255,255,255,0.08);
    --muted: rgba(255,255,255,0.6);
    /* Cursor color will be set dynamically by JS based on system theme */
    --cursor-color: #ffffff;
    --invert: 0;
    
    /* Keep Tailwind compatibility */
    --background: 0 0% 0%;
    --foreground: 0 0% 90%;
    --card-foreground: 0 0% 90%;
    --popover: 0 0% 0%;
    --popover-foreground: 0 0% 90%;
    --primary: 0 0% 90%;
    --primary-foreground: 0 0% 10%;
    --secondary: 0 0% 10%;
    --secondary-foreground: 0 0% 90%;
    --muted-foreground: 0 0% 60%;
    --accent-foreground: 0 0% 90%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 90%;
    --input: 0 0% 10%;
    --ring: 0 0% 90%;
    --radius: 0.5rem;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    color-scheme: dark;
    cursor: default;
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10 and IE 11 */
    user-select: none; /* Standard syntax */
  }

  body {
    @apply bg-background text-foreground;
    background-color: var(--bg);
    color: var(--fg);
    transition: background-color 200ms ease, color 200ms ease;
  }
  
  /* Auto-invert utility class */
  .auto-invert {
    filter: invert(var(--invert, 0));
    transition: filter 200ms ease;
  }

  /* Set cursor for text input elements */
  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='search'],
  input[type='url'],
  input[type='tel'],
  input[type='number'],
  textarea {
    cursor: text;
    -webkit-user-select: auto; /* Safari */
    -ms-user-select: auto; /* IE 10 and IE 11 */
    user-select: auto; /* Standard syntax */
  }

  /* Set cursor for clickable elements */
  button,
  a,
  [role='button'] {
    cursor: pointer;
  }

  p, h1, h2, h3, h4, h5, h6, span, div {
    -webkit-user-select: none; /* Safari */
    -ms-user-select: none; /* IE 10 and IE 11 */
    user-select: none; /* Standard syntax */
    cursor: default;
  }
}

/* Custom Cursor Styles */
/* Cursor color is set dynamically by JS based on system theme */
.custom-cursor {
  position: fixed;
  width: 10px;
  height: 10px;
  background: var(--cursor-color);
  border-radius: 50%;
  pointer-events: none;
  z-index: 9999;
  mix-blend-mode: difference;
  transition: transform 0.1s ease-out, width 0.2s ease-out, height 0.2s ease-out, background 200ms ease;
}

/* Light system: keep mix-blend-mode for white cursor visibility */
.custom-cursor.cursor-light-system {
  mix-blend-mode: difference;
  opacity: 1;
  background: #ffffff !important;
}

.custom-cursor.cursor-hover {
  width: 6px;
  height: 6px;
  transform: translate(-50%, -50%) scale(1.2);
}

.custom-cursor-ring {
  position: fixed;
  width: 30px;
  height: 30px;
  border: 2px solid var(--cursor-color);
  border-radius: 50%;
  pointer-events: none;
  z-index: 9998;
  mix-blend-mode: difference;
  transition: width 0.2s ease-out, height 0.2s ease-out, border-width 0.2s ease-out, border-color 200ms ease;
}

/* Light system: keep mix-blend-mode for white cursor ring visibility */
.custom-cursor-ring.cursor-light-system {
  mix-blend-mode: difference;
  opacity: 1;
  border-color: #ffffff !important;
}

.custom-cursor-ring.ring-hover {
  width: 50px;
  height: 50px;
  border-width: 1px;
}

/* Hide default cursor on desktop only */
@media (hover: hover) and (pointer: fine) {
  * {
    cursor: none !important;
  }

  /* Show default cursor for text inputs */
  input[type='text'],
  input[type='email'],
  input[type='password'],
  input[type='search'],
  input[type='url'],
  input[type='tel'],
  input[type='number'],
  textarea {
    cursor: text !important;
  }
}

/* Circular Tunnel Animation Styles */
#tunnel-overlay {
  position: fixed !important;
  inset: 0;
  pointer-events: none;
  opacity: 0;
  z-index: 9999;
  background: transparent;
  transition: opacity 0.4s ease-out, background 0.3s ease-out;
  overflow: hidden;
  --tunnel-cx: 50%;
  --tunnel-cy: 50%;
  /* Isolate from parent transforms */
  transform: none !important;
}

#tunnel-overlay.active {
  opacity: 1;
}

.tunnel-container {
  position: fixed !important;
  left: var(--tunnel-cx, 50%);
  top: var(--tunnel-cy, 50%);
  width: 0;
  height: 0;
  perspective: 1200px;
  perspective-origin: center center;
  transform-style: preserve-3d;
  transform: translate(-50%, -50%);
  pointer-events: none;
  /* Isolate from parent transforms */
  isolation: isolate;
}

.tunnel-ring {
  position: absolute;
  width: 120px;
  height: 120px;
  border-radius: 50%;
  border: 1px solid rgba(255, 255, 255, 0.6); /* Always white - dark theme only */
  /* Single centering transform - no margins, no double translate */
  left: 0;
  top: 0;
  margin: 0;
  transform-style: preserve-3d;
  opacity: 0;
  --ring-z: -3000px;
  --ring-scale: 0.1;
  --ring-delay: 0s;
  /* Single translate from container center (0,0) - start further back and smaller */
  transform: translate(-60px, -60px) translateZ(-4000px) scale(0.05);
  will-change: transform, opacity;
}

#tunnel-overlay.active .tunnel-ring {
  animation: tunnel-ring-forward 1.2s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
}

@keyframes tunnel-ring-forward {
  0% {
    opacity: 0;
    transform: translate(-60px, -60px) translateZ(var(--ring-z)) scale(var(--ring-scale));
  }
  10% {
    opacity: 0.2;
  }
  30% {
    opacity: 0.5;
  }
  60% {
    opacity: 0.75;
  }
  90% {
    opacity: 0.9;
  }
  100% {
    opacity: 0;
    transform: translate(-60px, -60px) translateZ(1200px) scale(8);
  }
}

/* Vortex flash effect */
.vortex-flash {
  position: absolute;
  left: 0;
  top: 0;
  width: 200px;
  height: 200px;
  margin: 0;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(255, 255, 255, 0.6) 0%, rgba(200, 210, 255, 0.2) 40%, transparent 70%);
  opacity: 0;
  transform: translate(-100px, -100px) scale(0);
  pointer-events: none;
  transform-style: preserve-3d;
}

#tunnel-overlay.active .vortex-flash {
  animation: vortex-burst 0.8s cubic-bezier(0.4, 0, 0.2, 1) 0.1s forwards;
}

@keyframes vortex-burst {
  0% {
    opacity: 0;
    transform: translate(-100px, -100px) scale(0);
  }
  30% {
    opacity: 0.8;
    transform: translate(-100px, -100px) scale(1.5);
  }
  60% {
    opacity: 0.4;
    transform: translate(-100px, -100px) scale(3);
  }
  100% {
    opacity: 0;
    transform: translate(-100px, -100px) scale(5);
  }
}

/* Page fade to black */
#tunnel-overlay.fade-black {
  background: rgba(0, 0, 0, 0.95);
  transition: background 0.2s ease-out;
}

/* Button animation to center */
.button-to-center {
  position: fixed !important;
  z-index: 10000 !important;
  pointer-events: none !important;
  transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1), 
              opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1) 0.3s,
              scale 0.6s cubic-bezier(0.4, 0, 0.2, 1) !important;
}

/* Subtle noise/grain texture overlay */
.noise-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 1;
  opacity: 0.015;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
}

/* Organic animation keyframes */
@keyframes organic-float {
  0%, 100% {
    transform: translateY(0) translateX(0) rotate(0deg);
  }
  25% {
    transform: translateY(-8px) translateX(4px) rotate(1deg);
  }
  50% {
    transform: translateY(-12px) translateX(-3px) rotate(-0.5deg);
  }
  75% {
    transform: translateY(-6px) translateX(2px) rotate(0.5deg);
  }
}

@keyframes subtle-pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.95;
  }
}